# Crash Consistency
- Unlike most data structure, file system data structures must **persist**
    - They must survive over the long haul, stored on devices that retain data despite power loss
- One major challenge faced by a file system is how to updated persistent data structure despite the presence of a **power loss** or **system crash**
- We'll begin by examining the approach taken by older file systems
    - `fsck` (file system checker)
        - Fast
        - Cannot be completely fixed
    - `journaling` (write-ahead logging)
        - Slow
        - Won't be damaged

## A Detailed Example
- Workload
    - Append of a single data block (4KB) to an existing file
    - `open()` -> `lseek()` -> `write()` -> `close()`
- Before append a single data block
    - single inode is allocated (inode number 2)
    - single allocated data block (data block 4)
    - The inode is denoted I[v1]